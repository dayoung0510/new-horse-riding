(this["webpackJsonphorse-racing-game"]=this["webpackJsonphorse-racing-game"]||[]).push([[0],{22:function(e,n,t){},26:function(e,n,t){"use strict";t.r(n);var r,i,c,s,a,o,b,d,j,l,u,g,h,O,m,f,p,x=t(1),v=t.n(x),y=t(13),w=t.n(y),k=(t(22),t(2)),T=t(3),N=T.b.div(r||(r=Object(k.a)(["\n  font-weight: 800;\n  font-size: 2rem;\n  padding: 1rem 0;\n  text-align: center;\n"]))),H=T.b.div(i||(i=Object(k.a)(["\n  select {\n    margin: 0 0.5rem;\n    padding: 0.5rem;\n  }\n  input {\n    padding: 0.5rem;\n  }\n"]))),I=T.b.div(c||(c=Object(k.a)(["\n  margin: 2rem 0;\n"]))),M=T.b.button(s||(s=Object(k.a)(["\n  background: #fff;\n  border: 0;\n  outline: 0;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  position: absolute;\n  bottom: 2rem;\n  right: 2rem;\n  border-radius: 0.5rem;\n  border: 1px solid gray;\n"]))),A=T.b.div(a||(a=Object(k.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: burlywood;\n  position: relative;\n"]))),C=T.b.div(o||(o=Object(k.a)(["\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 1.2rem;\n  background-color: #222;\n  color: lightgray;\n  font-size: 0.8rem;\n  letter-spacing: 1.5rem;\n  text-align: center;\n"]))),F=T.b.div(b||(b=Object(k.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n  color: #fff;\n"]))),E=T.b.div(d||(d=Object(k.a)(["\n  width: 20%;\n  height: 100%;\n  border-left: 1px dashed #ececec;\n  position: relative;\n  display: flex;\n  justify-content: center;\n"]))),G=T.b.span(j||(j=Object(k.a)(["\n  color: red;\n"]))),S=T.b.span(l||(l=Object(k.a)(["\n  color: green;\n"]))),L=t(17),P=t(8),D=t(11),R=t(4),z=[{id:0,name:"\uc801\ud1a0\ub9c8",color:"brown"},{id:1,name:"\ub2f9\ub098\uadc0",color:"gold"},{id:2,name:"\ud398\uac00\uc218\uc2a4",color:"gray"},{id:3,name:"\uc870\ub791\ub9d0",color:"darkkhaki"},{id:4,name:"\uc720\ub2c8\ucf58",color:"ivory"}],B=[[0,10,14,25,33,50,55,75,80,90],[0,30,32,40,43,60,70,72,75,80],[0,10,15,20,25,30,35,40,45,50],[0,15,30,38,42,55,60,65,68,70],[0,20,28,32,50,70,72,80,83,86]],J=t(0),U={users:[{id:0,name:"\uae40\ub77c\ub9c8",assets:1e5},{id:1,name:"\ubc15\ub099\ud0c0",assets:1e5},{id:2,name:"\uc54c\ud30c\uce74",assets:1e5}],bettings:[{bettingPerson:"",bettingHorse:0,bettingMoney:0},{bettingPerson:"",bettingHorse:0,bettingMoney:0},{bettingPerson:"",bettingHorse:0,bettingMoney:0}],speedDistribution:[],isOngoing:!1,second:0,winnerHorse:-1,afterGame:[{id:0,money:0},{id:1,money:0},{id:2,money:0}]},W=Object(x.createContext)({state:U,dispatch:function(){}}),q=function(){return Object(x.useContext)(W)},K=function(e,n){var t=e.second;switch(n.type){case"START":e.second=0,e.isOngoing=!0;for(var r=z.map((function(e){return e.id})),i=r.length;0!==i;){var c=Math.floor(Math.random()*i);i-=1;var s=[r[c],r[i]];r[i]=s[0],r[c]=s[1]}return Object(R.a)(Object(R.a)({},e),{},{speedDistribution:r});case"COUNT":return Object(R.a)(Object(R.a)({},e),{},{second:t+1});case"FINISH":return Object(R.a)(Object(R.a)({},e),{},{isOngoing:!1,winnerHorse:e.speedDistribution.indexOf(0)});case"BETTING":var a=n.name,o=n.value,b=n.idx;return Object(R.a)(Object(R.a)({},e),{},{bettings:[].concat(Object(D.a)(e.bettings.slice(0,b)),[Object(R.a)(Object(R.a)({},e.bettings[b]),{},Object(P.a)({bettingPerson:e.users[b].name},a,o))],Object(D.a)(e.bettings.slice(b+1)))});case"WALLET":return e.bettings.map((function(n,t){return Number(n.bettingHorse)===e.winnerHorse?e.users[t].assets+=Number(n.bettingMoney):e.users[t].assets-=Number(n.bettingMoney)})),Object(R.a)({},e);case"INSTANT":return console.log("!",e.bettings),e.bettings.map((function(n,t){e.afterGame[t].money=n.bettingMoney})),console.log(e.afterGame),Object(R.a)(Object(R.a)({},e),e.bettings)}},Q=function(e){var n=e.children,t=Object(x.useReducer)(K,U),r=Object(L.a)(t,2),i=r[0],c=r[1];return Object(J.jsx)(W.Provider,{value:{state:i,dispatch:c},children:n})},V=function(){var e=q(),n=e.state.users,t=e.dispatch,r=Object(x.useCallback)((function(e){return function(n){var r=n.target,i=r.name,c=r.value;t({type:"BETTING",name:i,value:c,idx:e})}}),[t]);return Object(J.jsx)(J.Fragment,{children:Object(J.jsxs)(H,{children:[Object(J.jsx)(N,{children:"\ucc38\uac00\uc790"}),n.map((function(e,n){return Object(J.jsxs)(I,{children:[e.name,Object(J.jsxs)("select",{onChange:r(n),name:"bettingHorse",children:[Object(J.jsx)("option",{value:"",children:"\ub9d0\uc744 \uc120\ud0dd\ud558\uc138\uc694"}),z.map((function(e){return Object(J.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(J.jsx)("input",{name:"bettingMoney",onChange:r(n),placeholder:"\uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694",required:!0})]},n)})),Object(J.jsx)(M,{onClick:function(){t({type:"START"})},children:"\uc2dc\uc791"})]})})},X=function(){var e=q().state,n=e.users,t=e.bettings,r=e.afterGame,i=e.winnerHorse;return Object(x.useEffect)((function(){var e=setTimeout((function(){}),300);return function(){clearTimeout(e)}}),[i]),Object(J.jsxs)(H,{children:[Object(J.jsx)(N,{children:"\ub0b4 \uc9c0\uac11"}),n.map((function(e,n){return Object(J.jsxs)(I,{children:[e.name," ",e.assets.toLocaleString("ko-KR"),"\uc6d0"," ",Number(t[n].bettingHorse)===i?Object(J.jsxs)(S,{children:["+",Math.abs(r[n].money),"\uc6d0"]}):Object(J.jsx)(J.Fragment,{children:Object(J.jsxs)(G,{children:["-",Math.abs(r[n].money),"\uc6d0"]})})]},e.id)}))]})},Y=v.a.memo(X),Z=T.b.div(u||(u=Object(k.a)(["\n  width: 5rem;\n  height: 5rem;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: black;\n  position: absolute;\n  bottom: 0;\n  ","\n"])),(function(e){var n=e.bg;return Object(T.a)(g||(g=Object(k.a)(["\n    background-color: ",";\n  "])),n)})),$=function(e){var n=e.bg,t=e.name,r=e.speed,i=void 0===r?0:r,c=q().state.second;return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(Z,{style:{bottom:"".concat(B[i][c],"%")},name:t,bg:n,children:t})})},_=function(){var e=q(),n=e.state,t=n.second,r=n.isOngoing,i=n.speedDistribution,c=e.dispatch;return Object(x.useEffect)((function(){if(r){var e=setInterval((function(){if(!0===r&&t<B[0].length-1)return clearInterval(e),c({type:"COUNT"});c({type:"FINISH"}),c({type:"WALLET"}),c({type:"INSTANT"})}),300);return function(){clearInterval(e)}}})),Object(J.jsx)(J.Fragment,{children:Object(J.jsxs)(A,{children:[Object(J.jsx)(C,{children:"GOAL"}),Object(J.jsx)(F,{children:z.map((function(e){var n=i[e.id];return Object(J.jsx)(E,{children:Object(J.jsx)($,{bg:e.color,name:e.name,speed:n})},e.id)}))})]})})},ee=T.b.div(h||(h=Object(k.a)(["\n  width: 100%;\n  height: 50%;\n  background-color: whitesmoke;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n"]))),ne=T.b.div(O||(O=Object(k.a)(["\n  width: 100%;\n  height: 50%;\n  background-color: gainsboro;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n"]))),te=T.b.div(m||(m=Object(k.a)(["\n  background-color: darkslategray;\n  width: 100vw;\n  height: 100vh;\n  padding: 3rem;\n  box-sizing: border-box;\n"]))),re=T.b.div(f||(f=Object(k.a)(["\n  width: 50%;\n  height: 100%;\n"]))),ie=T.b.div(p||(p=Object(k.a)(["\n  display: flex;\n  justify-content: space-between;\n  height: 100%;\n"]))),ce=function(){return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(te,{children:Object(J.jsxs)(ie,{children:[Object(J.jsxs)(re,{children:[Object(J.jsx)(ee,{children:Object(J.jsx)(V,{})}),Object(J.jsx)(ne,{children:Object(J.jsx)(Y,{})})]}),Object(J.jsx)(re,{children:Object(J.jsx)(_,{})})]})})})};var se=function(){return Object(J.jsx)("div",{className:"App",children:Object(J.jsx)(Q,{children:Object(J.jsx)(ce,{})})})};w.a.render(Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(se,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.92f5152d.chunk.js.map